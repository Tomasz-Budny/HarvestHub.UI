@if (apiLoaded | async) {
  <google-map 
    width="100%"
    height="100%"
    [options]="options">
    @if (fieldsLoaded()) {
      @for (field of fields(); track $index) {
        <map-polygon
          (polygonMouseover)="onFieldMouseover(field)"
          (polygonMouseout)="onFieldMouseout()"
          [paths]="field.paths"
          [options]="{
            fillColor: field.color,
            fillOpacity: 0.8
          }">
        </map-polygon>
      }
      @if (marker) {
        <map-marker
          [label]="marker.name"
          [position]="marker.center">
        </map-marker>    
      }        
    }
  </google-map>
}
