@if (apiLoaded | async) {
  <google-map 
    width="100%"
    height="100%"
    [center]="{lat: 30, lng: 20.2}"
    [zoom]="3"
    [options]="options">
    @if (fieldsLoaded()) {
      @for (field of fields(); track $index) {
        <map-polygon
          *ngIf="editingFieldId() !== field.id"
          (polygonClick)="onPolygonClick(field)"
          (polygonMouseover)="onFieldMouseover(field)"
          (polygonMouseout)="onFieldMouseout()"
          [paths]="field.paths"
          [options]="{
            fillColor: field.color,
            fillOpacity: 0.8
          }">
        </map-polygon>
      }
      @if (marker) {
        <map-marker
          label=""
          [position]="marker.center"
          [icon]="hoveredField | fieldInfoModalSvg"
          (mapClick)="onPolygonClick(hoveredField)">
        </map-marker>    
      }        
    }
  </google-map>
}
<app-map-controls mapControl></app-map-controls>

